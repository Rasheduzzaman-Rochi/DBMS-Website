<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Alerts</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#e8f5e9] font-sans text-gray-800">
  <!-- Navbar -->
  <div class="bg-green-900 text-white py-4 shadow-md">
    <div class="flex justify-center items-center space-x-3">
      <img src="assets/logo.svg" alt="Logo" class="w-14 h-14">
      <span class="text-3xl font-bold tracking-wide">‡¶∂‡¶∏‡ßç‡¶Ø ‡¶∂‡ßç‡¶Ø‡¶æ‡¶Æ‡¶≤‡¶æ</span>
    </div>
  </div>

  <!-- Container -->
  <div class="max-w-6xl mx-auto mt-8 p-6 bg-white rounded-2xl shadow-lg">
    <h1 class="text-3xl font-bold text-center text-green-800 mb-8">üì¢ Alert Center</h1>

    <!-- Summary Cards -->
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8">
      <div class="bg-green-100 p-4 rounded-2xl shadow-sm text-center">
        <p class="text-sm text-gray-600">Active Alerts</p>
        <p class="text-xl font-bold text-green-700" id="activeCount">0</p>
      </div>
      <div class="bg-green-100 p-4 rounded-2xl shadow-sm text-center">
        <p class="text-sm text-gray-600">Resolved Alerts</p>
        <p class="text-xl font-bold text-green-700" id="resolvedCount">0</p>
      </div>
      <div class="bg-green-100 p-4 rounded-2xl shadow-sm text-center">
        <p class="text-sm text-gray-600">Pending Alerts</p>
        <p class="text-xl font-bold text-green-700" id="pendingCount">0</p>
      </div>
    </div>

    <!-- Filters -->
    <div class="flex flex-col md:flex-row justify-end gap-4 mb-6">
      <select id="filterType" class="px-4 py-2 border rounded-xl shadow-sm">
        <option>All Alerts</option>
        <option>Expiry Alert</option>
        <option>Temperature Alert</option>
        <option>Stock Alert</option>
        <option>Transport Alert</option>
        <option>Spoilage Alert</option>
        <option>Storage Alert</option>
        <option>Maintenance Alert</option>
        <option>Inventory Alert</option>
        <option>Harvesting Alert</option>
        <option>Quality Alert</option>
        <option>Packaging Alert</option>
      </select>
      <select id="filterSeverity" class="px-4 py-2 border rounded-xl shadow-sm">
        <option>All Severity Levels</option>
        <option>High</option>
        <option>Medium</option>
        <option>Low</option>
      </select>
      <button onclick="applyFilters()" class="bg-green-700 hover:bg-green-600 text-white px-5 py-2 rounded-xl shadow">Apply</button>
    </div>

    <!-- Alerts Table -->
    <div class="overflow-x-auto">
      <table class="min-w-full bg-white border border-gray-200 rounded-xl overflow-hidden">
        <thead class="bg-green-100">
          <tr class="text-left">
            <th class="px-4 py-3">Alert Type</th>
            <th class="px-4 py-3">Description</th>
            <th class="px-4 py-3">Severity</th>
            <th class="px-4 py-3">Status</th>
            <th class="px-4 py-3">Action</th>
          </tr>
        </thead>
        <tbody id="alertsBody" class="text-sm">
          <!-- Rows inserted by JS -->
        </tbody>
      </table>
    </div>

    <!-- Alert Form -->
    <div class="mt-10 bg-green-50 p-6 rounded-2xl shadow">
      <h3 class="text-xl font-semibold mb-4 text-green-800">üìù Create New Alert</h3>
      <form id="alertForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label for="alertType" class="block mb-1 text-sm font-medium">Alert Type</label>
          <select id="alertType" name="alertType" class="w-full px-3 py-2 border rounded-xl">
            <option>Expiry Alert</option>
            <option>Temperature Alert</option>
            <option>Stock Alert</option>
            <option>Transport Alert</option>
            <option>Spoilage Alert</option>
            <option>Storage Alert</option>
            <option>Maintenance Alert</option>
            <option>Inventory Alert</option>
            <option>Harvesting Alert</option>
            <option>Quality Alert</option>
            <option>Packaging Alert</option>
          </select>
        </div>
        <div>
          <label for="severity" class="block mb-1 text-sm font-medium">Severity</label>
          <select id="severity" name="severity" class="w-full px-3 py-2 border rounded-xl">
            <option>High</option>
            <option>Medium</option>
            <option>Low</option>
          </select>
        </div>
        <div class="md:col-span-2">
          <label for="description" class="block mb-1 text-sm font-medium">Description</label>
          <textarea id="description" name="description" rows="4" class="w-full px-3 py-2 border rounded-xl" placeholder="Enter alert details..."></textarea>
        </div>
        <div class="md:col-span-2 text-right">
          <button type="submit" class="bg-green-700 hover:bg-green-600 text-white px-6 py-2 rounded-xl shadow">Create Alert</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    const alertForm = document.getElementById("alertForm");
    const alertsBody = document.getElementById("alertsBody");

    const sampleAlerts = [
      ["Expiry Alert", "Tomatoes are about to expire", "High", "Active"],
      ["Temperature Alert", "Temperature is too high in storage", "Medium", "Active"],
      ["Transport Alert", "Delays in vegetable transport", "High", "Pending"]
    ];

    sampleAlerts.forEach(([type, desc, severity, status]) => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td class="px-4 py-3">${type}</td>
        <td class="px-4 py-3">${desc}</td>
        <td class="px-4 py-3">${severity}</td>
        <td class="px-4 py-3 status">${status}</td>
        <td class="px-4 py-3 space-x-2">
          <button class="resolve-btn bg-blue-600 hover:bg-blue-500 text-white px-3 py-1 rounded-lg">Resolve</button>
          <button class="delete-btn bg-red-600 hover:bg-red-500 text-white px-3 py-1 rounded-lg">Delete</button>
        </td>`;
      alertsBody.appendChild(row);
    });

    function updateCounts() {
      const statuses = Array.from(document.querySelectorAll(".status")).map(td => td.textContent.trim());
      document.getElementById("activeCount").textContent = statuses.filter(s => s === "Active").length;
      document.getElementById("resolvedCount").textContent = statuses.filter(s => s === "Resolved").length;
      document.getElementById("pendingCount").textContent = statuses.filter(s => s === "Pending").length;
    }

    function handleResolveClick(e) {
      const row = e.target.closest("tr");
      row.querySelector(".status").textContent = "Resolved";
      updateCounts();
    }

    function handleDeleteClick(e) {
      e.target.closest("tr").remove();
      updateCounts();
    }

    function addEventListeners() {
      document.querySelectorAll(".resolve-btn").forEach(btn => btn.addEventListener("click", handleResolveClick));
      document.querySelectorAll(".delete-btn").forEach(btn => btn.addEventListener("click", handleDeleteClick));
    }

    alertForm.addEventListener("submit", function (e) {
      e.preventDefault();
      const type = document.getElementById("alertType").value;
      const severity = document.getElementById("severity").value;
      const description = document.getElementById("description").value;
      const newRow = document.createElement("tr");
      newRow.innerHTML = `
        <td class="px-4 py-3">${type}</td>
        <td class="px-4 py-3">${description}</td>
        <td class="px-4 py-3">${severity}</td>
        <td class="px-4 py-3 status">Active</td>
        <td class="px-4 py-3 space-x-2">
          <button class="resolve-btn bg-blue-600 hover:bg-blue-500 text-white px-3 py-1 rounded-lg">Resolve</button>
          <button class="delete-btn bg-red-600 hover:bg-red-500 text-white px-3 py-1 rounded-lg">Delete</button>
        </td>`;
      alertsBody.appendChild(newRow);
      alertForm.reset();
      updateCounts();
      addEventListeners();
    });

    function applyFilters() {
      const filterType = document.getElementById("filterType").value;
      const filterSeverity = document.getElementById("filterSeverity").value;
      const rows = alertsBody.querySelectorAll("tr");
      rows.forEach(row => {
        const type = row.children[0].textContent.trim();
        const severity = row.children[2].textContent.trim();
        const typeMatch = (filterType === "All Alerts" || type === filterType);
        const severityMatch = (filterSeverity === "All Severity Levels" || severity === filterSeverity);
        row.style.display = (typeMatch && severityMatch) ? "" : "none";
      });
    }

    // Initialize
    addEventListeners();
    updateCounts();
  </script>
</body>
</html>
