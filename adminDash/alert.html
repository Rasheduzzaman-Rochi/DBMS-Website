<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Alerts</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-green-500 font-sans">

  <!-- Navbar -->
  <div class="bg-green-800 text-white py-4 shadow-sm">
    <div class="flex justify-center items-center space-x-3">
      <img src="logo.svg" alt="Logo" class="w-14 h-14">
      <span class="text-2xl font-bold">শস্য শ্যামলা</span>
    </div>
  </div>

  <!-- Container -->
  <div class="max-w-5xl mx-auto p-6 bg-white mt-6 rounded-lg shadow">
    <h1 class="text-2xl font-semibold text-center text-gray-800 mb-6">Alerts</h1>

    <!-- Summary -->
    <div class="flex justify-between text-sm text-gray-800 mb-6">
      <div class="bg-gray-200 px-4 py-2 rounded"><span class="font-bold">Active Alerts:</span> <span id="activeCount">0</span></div>
      <div class="bg-gray-200 px-4 py-2 rounded"><span class="font-bold">Resolved Alerts:</span> <span id="resolvedCount">0</span></div>
      <div class="bg-gray-200 px-4 py-2 rounded"><span class="font-bold">Pending Alerts:</span> <span id="pendingCount">0</span></div>
    </div>

    <!-- Filters -->
    <div class="flex justify-end items-center space-x-4 mb-4">
      <select id="filterType" class="px-3 py-2 border rounded">
        <option>All Alerts</option>
        <option>Expiry Alert</option>
        <option>Temperature Alert</option>
        <option>Stock Alert</option>
        <option>Transport Alert</option>
        <option>Spoilage Alert</option>
        <option>Storage Alert</option>
        <option>Maintenance Alert</option>
        <option>Inventory Alert</option>
        <option>Harvesting Alert</option>
        <option>Quality Alert</option>
        <option>Packaging Alert</option>
      </select>
      <select id="filterSeverity" class="px-3 py-2 border rounded">
        <option>All Severity Levels</option>
        <option>High</option>
        <option>Medium</option>
        <option>Low</option>
      </select>
      <button onclick="applyFilters()" class="bg-green-700 hover:bg-green-600 text-white px-4 py-2 rounded">Apply Filters</button>
    </div>

    <!-- Alerts Table -->
    <div class="overflow-x-auto">
      <table class="w-full table-auto border border-gray-200">
        <thead class="bg-gray-100 text-left">
          <tr>
            <th class="p-3 border">Alert Type</th>
            <th class="p-3 border">Description</th>
            <th class="p-3 border">Severity</th>
            <th class="p-3 border">Status</th>
            <th class="p-3 border">Action</th>
          </tr>
        </thead>
        <tbody id="alertsBody">
          <tr class="border-t">
            <td class="p-3">Expiry Alert</td>
            <td class="p-3">Tomatoes are about to expire</td>
            <td class="p-3">High</td>
            <td class="p-3 status">Active</td>
            <td class="p-3 space-x-2">
              <button class="resolve-btn bg-blue-600 text-white px-3 py-1 rounded">Resolve</button>
              <button class="delete-btn bg-red-600 text-white px-3 py-1 rounded">Delete</button>
            </td>
          </tr>
          <tr class="border-t">
            <td class="p-3">Temperature Alert</td>
            <td class="p-3">Temperature is too high in storage</td>
            <td class="p-3">Medium</td>
            <td class="p-3 status">Active</td>
            <td class="p-3 space-x-2">
              <button class="resolve-btn bg-blue-600 text-white px-3 py-1 rounded">Resolve</button>
              <button class="delete-btn bg-red-600 text-white px-3 py-1 rounded">Delete</button>
            </td>
          </tr>
          <tr class="border-t">
            <td class="p-3">Transport Alert</td>
            <td class="p-3">Delays in vegetable transport</td>
            <td class="p-3">High</td>
            <td class="p-3 status">Pending</td>
            <td class="p-3 space-x-2">
              <button class="resolve-btn bg-blue-600 text-white px-3 py-1 rounded">Resolve</button>
              <button class="delete-btn bg-red-600 text-white px-3 py-1 rounded">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Alert Form -->
    <div class="mt-8 bg-gray-50 p-6 rounded-lg">
      <h3 class="text-lg font-semibold mb-4">Create New Alert</h3>
      <form id="alertForm" class="space-y-4">
        <div>
          <label for="alertType" class="block mb-1">Alert Type</label>
          <select id="alertType" name="alertType" class="w-full px-3 py-2 border rounded">
            <option>Expiry Alert</option>
            <option>Temperature Alert</option>
            <option>Stock Alert</option>
            <option>Transport Alert</option>
            <option>Spoilage Alert</option>
            <option>Storage Alert</option>
            <option>Maintenance Alert</option>
            <option>Inventory Alert</option>
            <option>Harvesting Alert</option>
            <option>Quality Alert</option>
            <option>Packaging Alert</option>
          </select>
        </div>
        <div>
          <label for="severity" class="block mb-1">Severity</label>
          <select id="severity" name="severity" class="w-full px-3 py-2 border rounded">
            <option>High</option>
            <option>Medium</option>
            <option>Low</option>
          </select>
        </div>
        <div>
          <label for="description" class="block mb-1">Description</label>
          <textarea id="description" name="description" rows="4" class="w-full px-3 py-2 border rounded" placeholder="Enter the details of the alert"></textarea>
        </div>
        <button type="submit" class="bg-green-700 hover:bg-green-600 text-white px-4 py-2 rounded">Create Alert</button>
      </form>
    </div>
  </div>

  <script>
    const alertForm = document.getElementById("alertForm");
    const alertsBody = document.getElementById("alertsBody");

    function updateCounts() {
      const statuses = Array.from(document.querySelectorAll(".status")).map(td => td.textContent.trim());
      document.getElementById("activeCount").textContent = statuses.filter(s => s === "Active").length;
      document.getElementById("resolvedCount").textContent = statuses.filter(s => s === "Resolved").length;
      document.getElementById("pendingCount").textContent = statuses.filter(s => s === "Pending").length;
    }

    function handleResolveClick(e) {
      const row = e.target.closest("tr");
      const statusCell = row.querySelector(".status");
      statusCell.textContent = "Resolved";
      updateCounts();
    }

    function handleDeleteClick(e) {
      const row = e.target.closest("tr");
      row.remove();
      updateCounts();
    }

    function addEventListeners() {
      document.querySelectorAll(".resolve-btn").forEach(btn => {
        btn.removeEventListener("click", handleResolveClick);
        btn.addEventListener("click", handleResolveClick);
      });

      document.querySelectorAll(".delete-btn").forEach(btn => {
        btn.removeEventListener("click", handleDeleteClick);
        btn.addEventListener("click", handleDeleteClick);
      });
    }

    alertForm.addEventListener("submit", function (e) {
      e.preventDefault();

      const type = document.getElementById("alertType").value;
      const severity = document.getElementById("severity").value;
      const description = document.getElementById("description").value;

      const newRow = document.createElement("tr");
      newRow.className = "border-t";
      newRow.innerHTML = `
        <td class="p-3">${type}</td>
        <td class="p-3">${description}</td>
        <td class="p-3">${severity}</td>
        <td class="p-3 status">Active</td>
        <td class="p-3 space-x-2">
          <button class="resolve-btn bg-blue-600 text-white px-3 py-1 rounded">Resolve</button>
          <button class="delete-btn bg-red-600 text-white px-3 py-1 rounded">Delete</button>
        </td>
      `;
      alertsBody.appendChild(newRow);
      alertForm.reset();
      updateCounts();
      addEventListeners();
    });

    function applyFilters() {
      const filterType = document.getElementById("filterType").value;
      const filterSeverity = document.getElementById("filterSeverity").value;

      const rows = alertsBody.querySelectorAll("tr");
      rows.forEach(row => {
        const type = row.children[0].textContent.trim();
        const severity = row.children[2].textContent.trim();

        const typeMatch = (filterType === "All Alerts" || type === filterType);
        const severityMatch = (filterSeverity === "All Severity Levels" || severity === filterSeverity);

        row.style.display = (typeMatch && severityMatch) ? "" : "none";
      });
    }

    // Initialize
    addEventListeners();
    updateCounts();
  </script>

</body>
</html>
