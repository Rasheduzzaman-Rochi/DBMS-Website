<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Inventory & Loss Management</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-green-100"> 

  <!-- Logo Top Bar -->
  <div class="navbar bg-base-100 shadow-sm justify-center">
    <div class="navbar-center">
      <div class="flex items-center justify-center space-x-2">
        <img src="logo.svg" alt="Logo" class="w-14 h-14" />
        <span class="text-xl font-bold logo">‡¶∂‡¶∏‡ßç‡¶Ø ‡¶∂‡ßç‡¶Ø‡¶æ‡¶Æ‡¶≤‡¶æ</span>
      </div>
    </div>
  </div>

  <div class="p-6">

    <!-- Header  -->
    <header class="bg-green-700 text-white px-6 py-4 flex justify-between items-center shadow">
      <div class="flex items-center gap-2">
        <img src="https://img.icons8.com/ios-filled/50/ffffff/vegetarian-food.png" alt="Logo" class="w-8 h-8"/>
        <h1 class="text-xl font-bold">Inventory & Loss Management</h1>
      </div>
      <div class="flex gap-6">
        <div class="relative">
          <span class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full px-1">3</span>
          <button>üîî</button>
        </div>
        <div class="relative">
          <span class="absolute -top-2 -right-2 bg-yellow-400 text-black text-xs rounded-full px-1">1</span>
          <button>üí¨</button>
        </div>
      </div>
    </header>

    <!-- Form -->
    <section class="bg-white shadow rounded-lg mb-6 p-6">
      <h2 class="text-lg font-semibold mb-4">Add New Loss Record</h2>
      <div class="grid md:grid-cols-2 gap-4 mb-4">
        <input id="productName" type="text" placeholder="Product Name" class="p-2 border rounded w-full" />
        <input id="quantity" type="number" placeholder="Quantity (kg)" class="p-2 border rounded w-full" />
        <input id="lossDate" type="date" class="p-2 border rounded w-full" />
        <select id="stage" class="p-2 border rounded w-full">
          <option value="">Select Stage of Loss</option>
          <option value="Harvesting">Harvesting</option>
          <option value="Storage">Storage</option>
          <option value="Handling">Handling</option>
          <option value="Transportation">Transportation</option>
        </select>
        <input id="reason" type="text" placeholder="Reason for Loss" class="p-2 border rounded w-full col-span-2" />
      </div>
      <button onclick="addRecord()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Save Record</button>
    </section>

    <!-- Search -->
    <section class="mb-4">
      <input id="searchInput" type="text" onkeyup="filterTable()" placeholder="Search by Product..." class="p-2 border rounded w-full" />
    </section>

    <!-- Table -->
    <section class="bg-white shadow rounded-lg p-6 overflow-x-auto">
      <table class="min-w-full border text-left">
        <thead class="bg-green-100">
          <tr>
            <th class="px-4 py-2 border">Product</th>
            <th class="px-4 py-2 border">Quantity</th>
            <th class="px-4 py-2 border">Date</th>
            <th class="px-4 py-2 border">Stage</th>
            <th class="px-4 py-2 border">Reason for Loss</th>
            <th class="px-4 py-2 border">Status</th>
            <th class="px-4 py-2 border">Actions</th>
          </tr>
        </thead>
        <tbody id="recordTable" class="bg-white">
          <!-- JS will insert rows here -->
        </tbody>
      </table>
    </section>
  </div>

  <!-- Script -->
  <script>
    let records = [
      {
        name: "Tomato",
        quantity: 150,
        date: "2025-04-10",
        stage: "Storage",
        reason: "Overripe stock",
        status: "Pending"
      },
      {
        name: "Potato",
        quantity: 200,
        date: "2025-04-12",
        stage: "Transportation",
        reason: "Road delay damage",
        status: "Resolved"
      }
    ];

    function addRecord() {
      const name = document.getElementById('productName').value;
      const quantity = document.getElementById('quantity').value;
      const date = document.getElementById('lossDate').value;
      const stage = document.getElementById('stage').value;
      const reason = document.getElementById('reason').value;

      if (!name || !quantity || !date || !stage || !reason) {
        alert("Please fill all fields.");
        return;
      }

      records.push({ name, quantity, date, stage, reason, status: "Pending" });
      renderTable();
      clearForm();
    }

    function clearForm() {
      document.getElementById('productName').value = "";
      document.getElementById('quantity').value = "";
      document.getElementById('lossDate').value = "";
      document.getElementById('stage').value = "";
      document.getElementById('reason').value = "";
    }

    function renderTable() {
      const table = document.getElementById("recordTable");
      table.innerHTML = "";

      records.forEach((rec, i) => {
        table.innerHTML += `
          <tr class="hover:bg-green-50 border transition">
            <td class="px-4 py-2 border">${rec.name}</td>
            <td class="px-4 py-2 border">${rec.quantity}</td>
            <td class="px-4 py-2 border">${rec.date}</td>
            <td class="px-4 py-2 border">${rec.stage}</td>
            <td class="px-4 py-2 border">${rec.reason}</td>
            <td class="px-4 py-2 border">
              <span class="px-2 py-1 rounded text-white ${rec.status === "Pending" ? 'bg-yellow-500' : 'bg-green-600'}">${rec.status}</span>
            </td>
            <td class="px-4 py-2 border space-x-2">
              <button onclick="editRecord(${i})" class="text-blue-600 hover:underline">Edit</button>
              <button onclick="deleteRecord(${i})" class="text-red-600 hover:underline">Delete</button>
            </td>
          </tr>
        `;
      });
    }

    function deleteRecord(index) {
      records.splice(index, 1);
      renderTable();
    }

    function editRecord(index) {
      const record = records[index];
      document.getElementById('productName').value = record.name;
      document.getElementById('quantity').value = record.quantity;
      document.getElementById('lossDate').value = record.date;
      document.getElementById('stage').value = record.stage;
      document.getElementById('reason').value = record.reason;
      deleteRecord(index);
    }

    function filterTable() {
      const input = document.getElementById('searchInput').value.toLowerCase();
      const rows = document.querySelectorAll("#recordTable tr");

      rows.forEach(row => {
        const firstCol = row.children[0].textContent.toLowerCase();
        row.style.display = firstCol.includes(input) ? "" : "none";
      });
    }

    renderTable();
  </script>
</body>
</html>
